# 성장 기록 PDF 다운로드 기능 고도화 계획

## 1. 현황 및 문제점 분석
현재 구현된 PDF 다운로드 기능은 `html2canvas`와 `jspdf`를 사용하여 **화면을 캡처(이미지화)** 하는 방식입니다.

### 주요 문제점
1.  **화질 저하:** 이미지를 PDF에 넣는 방식이므로 확대 시 글자가 깨지거나 흐릿하게 보입니다.
2.  **텍스트 선택 불가:** 이미지 형태이므로 PDF 뷰어에서 텍스트를 드래그하거나 복사할 수 없습니다.
3.  **레이아웃 제약:** 웹 브라우저의 현재 화면 크기에 따라 PDF 결과물이 달라지며, A4 용지 규격에 맞춘 페이지 분할(Page Break)이 어렵습니다.
4.  **불필요한 UI 포함:** 버튼, 스크롤바 등 인쇄에 불필요한 요소가 포함될 수 있습니다.
5.  **단일 섹션 한계:** 현재 보고 있는 탭(Tab)만 다운로드되며, 성장 기록 전체(계획, 지표, 분석, 결과 등)를 통합한 리포트 생성이 어렵습니다.

## 2. 개선 목표
1.  **벡터 기반 PDF:** 텍스트 선택 및 검색이 가능한 고품질 PDF 생성.
2.  **A4 규격 최적화:** 인쇄 및 보관에 용이한 A4 사이즈 레이아웃 적용.
3.  **통합 리포트:** 성장 계획, 월간 지표, 분석, 연간 결과를 아우르는 종합 리포트 생성 기능.
4.  **전문적인 디자인:** 표지, 목차, 머리글/바닥글(페이지 번호) 등이 포함된 문서화.

## 3. 기술적 접근 방식 (제안)

### Option 1: `@react-pdf/renderer` 사용 (권장)
React 컴포넌트 문법을 사용하여 PDF 문서를 선언적으로 정의하는 라이브러리입니다.

*   **장점:**
    *   **클라이언트 사이드 생성:** 서버 부하 없이 브라우저에서 바로 생성 가능.
    *   **React 친화적:** 기존 React 개발 방식과 유사하게 PDF UI를 구성할 수 있음.
    *   **고품질:** 텍스트가 벡터로 렌더링되어 매우 선명하고 용량도 작음.
    *   **레이아웃 제어:** Flexbox 기반의 레이아웃 시스템을 제공하여 정교한 디자인 가능.
*   **단점:**
    *   HTML/CSS를 그대로 쓸 수 없고, 전용 컴포넌트(`View`, `Text`, `StyleSheet`)를 사용해야 함 (새로운 스타일링 작업 필요).

### Option 2: Server-side Puppeteer
서버에서 Headless Browser를 띄워 인쇄용 HTML 페이지를 렌더링하고 PDF로 변환하는 방식입니다.

*   **장점:**
    *   기존 HTML/CSS를 거의 그대로 재사용 가능 (Print CSS 활용).
    *   화면과 가장 유사한 결과물 보장.
*   **단점:**
    *   **서버 리소스 과다 사용:** 브라우저를 실행해야 하므로 메모리/CPU 사용량이 높음.
    *   **속도:** 브라우저 실행 및 렌더링 시간으로 인해 생성이 느림.
    *   **구조적 복잡성:** 별도의 렌더링 서버나 API가 필요함.

### 결론
**Option 1 (`@react-pdf/renderer`)** 방식을 제안합니다. 클라이언트 리소스를 활용하므로 서버 비용이 들지 않고, 사용자 경험(속도, 인터랙션) 측면에서 유리하며, React 생태계에서 가장 표준적인 방식입니다.

## 4. 구현 상세 계획

### 4.1. 라이브러리 설치
```bash
npm install @react-pdf/renderer
```

### 4.2. 데이터 구조화
PDF 생성에 필요한 데이터를 한곳에서 모으는 로직이 필요합니다.
*   `GrowthPlan` (성장 계획)
*   `MonthlyLog` (월간 기록 - 선택된 월 또는 전체)
*   `User` (사용자 정보 - 이름, 소속 등)

### 4.3. PDF 컴포넌트 설계 (`src/components/PDF`)
PDF 문서를 구성하는 컴포넌트를 별도로 제작합니다.

*   `GrowthReportDocument.jsx`: 전체 문서 구조 (`<Document>`)
*   `ReportCover.jsx`: 표지 (제목, 사용자 이름, 날짜)
*   `ReportPage.jsx`: 공통 페이지 레이아웃 (머리글, 바닥글, 페이지 번호)
*   `SectionPlan.jsx`: 성장 계획 섹션
*   `SectionMonthly.jsx`: 월간 지표 및 분석 섹션
*   `SectionYearly.jsx`: 연간 결과 섹션

### 4.4. UI 통합
`GrowthRecordPage` 상단에 "전체 리포트 다운로드" 버튼을 배치하고, 클릭 시 `PDFDownloadLink`를 통해 생성된 PDF를 다운로드하도록 구현합니다.

## 5. 예상 결과물 구조 (예시)

*   **Page 1:** 표지 (2025년 성장 기록 리포트, 작성자: 홍길동)
*   **Page 2:** 성장 계획 (원하는 나, 핵심 가치, 연간 목표)
*   **Page 3~14:** 월간 기록 (1월~12월)
    *   각 월별 목표 및 활동 계획
    *   월간 성장 지표 (활동 로그)
    *   월간 성장 분석 (강점, 약점, 보완점)
*   **Page 15:** 연간 결과 보고서 (활동별 성과 및 총평)
*   **Page 16:** 성장 소감 (회고)

---
이 계획에 따라 구현을 진행하면, 단순 캡처가 아닌 **'책자' 형태의 고품질 리포트**를 사용자에게 제공할 수 있습니다.
